<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ACSF Hub | Professional Stats</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;900&display=swap" rel="stylesheet">
    <style>
        body { background-color: #050505; color: #ececec; font-family: 'Inter', sans-serif; }
        .nav-btn { font-size: 11px; font-weight: 900; color: #52525b; border-bottom: 2px solid transparent; padding-bottom: 8px; transition: 0.2s; letter-spacing: 0.05em; }
        .nav-btn.active { color: #00ff85; border-color: #00ff85; }
        .card { background: #111113; border: 1px solid #222225; border-radius: 12px; overflow: hidden; }
        .avatar { width: 32px; height: 32px; border-radius: 50%; background: #27272a; border: 1px solid #3f3f46; }
        .badge { background: #00ff85; color: #050505; padding: 2px 6px; border-radius: 4px; font-weight: 900; font-size: 10px; }
        table { width: 100%; text-align: left; font-size: 11px; }
        th { padding: 12px; color: #71717a; text-transform: uppercase; font-size: 9px; letter-spacing: 0.1em; }
        td { padding: 12px; border-top: 1px solid #1f1f22; }
        tr.clickable:hover { background: #18181b; cursor: pointer; }
        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.98); z-index: 100; padding: 20px; overflow-y: auto; }
        .stat-grid { display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px; }
    </style>
</head>
<body class="max-w-2xl mx-auto pb-20 border-x border-zinc-900 shadow-2xl">

    <header class="sticky top-0 bg-[#050505]/95 backdrop-blur-xl z-50 px-6 pt-8 border-b border-zinc-900">
        <div class="flex justify-between items-center mb-6">
            <h1 class="text-2xl font-black italic tracking-tighter text-[#00ff85]">ACSF</h1>
            <input type="text" id="mainSearch" placeholder="Search team or player..." class="bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-xs w-48 outline-none focus:border-[#00ff85]" oninput="handleSearch()">
        </div>
        <nav class="flex space-x-8">
            <button onclick="showTab('standings')" id="btn-standings" class="nav-btn active">STANDINGS</button>
            <button onclick="showTab('leaders')" id="btn-leaders" class="nav-btn">LEADERS</button>
        </nav>
    </header>

    <main class="px-4 mt-8">
        <div id="section-standings" class="space-y-10">
            <div>
                <h3 class="text-[10px] font-black text-zinc-500 mb-4 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-1.5 h-1.5 bg-blue-500 rounded-full"></span> Eastern Conference</h3>
                <div class="card"><table id="table-eastern"></table></div>
            </div>
            <div>
                <h3 class="text-[10px] font-black text-zinc-500 mb-4 uppercase tracking-[0.2em] flex items-center gap-2"><span class="w-1.5 h-1.5 bg-red-500 rounded-full"></span> Western Conference</h3>
                <div class="card"><table id="table-western"></table></div>
            </div>
        </div>

        <div id="section-leaders" class="hidden space-y-8">
            <div class="stat-grid">
                <div><h3 class="text-[9px] font-black text-zinc-500 mb-3 uppercase tracking-widest">Top Goals</h3><div id="list-goals" class="card divide-y divide-zinc-800"></div></div>
                <div><h3 class="text-[9px] font-black text-zinc-500 mb-3 uppercase tracking-widest">Top Assists</h3><div id="list-assists" class="card divide-y divide-zinc-800"></div></div>
                <div><h3 class="text-[9px] font-black text-zinc-500 mb-3 uppercase tracking-widest">Match Ratings</h3><div id="list-ratings" class="card divide-y divide-zinc-800"></div></div>
                <div><h3 class="text-[9px] font-black text-zinc-500 mb-3 uppercase tracking-widest">Clean Sheets</h3><div id="list-clean" class="card divide-y divide-zinc-800"></div></div>
            </div>
        </div>
    </main>

    <div id="teamModal" class="modal">
        <div class="max-w-md mx-auto">
            <button onclick="closeModal()" class="mb-6 text-[#00ff85] text-xs font-black uppercase tracking-widest">‚Üê Return to Hub</button>
            <div id="teamContent"></div>
        </div>
    </div>

    <script>
        // PASTE YOUR PUBLISHED GOOGLE SHEET CSV LINKS HERE
        const LINKS = {
            standings: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vS5yTQVQrEpc3LwF8vCZUu6rVk4vLFt97HjM5WYYQEy85b18G7XaV7m8FoNnd0VVg/pub?output=csv',
            goals: 'https://docs.google.com/spreadsheets/d/e/2PACX-1vQGYlxWXa8fXFdQDf07aZrImlOsTiVcT36kgCbJKqlqDIWkhEEL7h642GOmJJx0uGBhqmeGz5OKmPqZ/pub?output=csv',
            assists: 'PASTE_ASSISTS_LINK_HERE',
            ratings: 'PASTE_RATINGS_LINK_HERE',
            cleans: 'PASTE_CLEAN_SHEETS_LINK_HERE'
        };

        let data = { goals: [], assists: [], ratings: [], cleans: [], standings: [] };

        async function init() {
            // Fetch everything
            const fetchCsv = (url) => new Promise(res => Papa.parse(url, { download: true, header: true, complete: d => res(d.data) }));
            
            data.standings = await fetchCsv(LINKS.standings);
            data.goals = await fetchCsv(LINKS.goals);
            // Add other fetches if links provided...

            render();
        }

        function render() {
            renderStandings();
            renderLeaderboard('list-goals', data.goals, 'Goals');
            // Others will render once you add links
        }

        function renderStandings() {
            const tableHtml = (rows) => `
                <thead><tr><th>#</th><th>Team</th><th>GP</th><th>GD</th><th>PTS</th></tr></thead>
                <tbody>${rows.map((r, i) => `
                    <tr class="clickable" onclick="openTeam('${r.Team}')">
                        <td class="text-zinc-600 font-bold">${i+1}</td>
                        <td class="font-bold text-white">${r.Team}</td>
                        <td>${r.GP}</td><td>${r.GD}</td>
                        <td class="font-black text-[#00ff85]">${r.PTS}</td>
                    </tr>`).join('')}
                </tbody>`;

            // Identify Conferences (Handling the side-by-side CSV structure)
            const east = data.standings.filter(r => r.Team && r.PTS).slice(0, 15).sort((a,b) => b.PTS - a.PTS || b.GD - a.GD);
            const west = data.standings.filter(r => r.Team && r.PTS).slice(15, 30).sort((a,b) => b.PTS - a.PTS || b.GD - a.GD);

            document.getElementById('table-eastern').innerHTML = tableHtml(east);
            document.getElementById('table-western').innerHTML = tableHtml(west);
        }

        function renderLeaderboard(elId, source, key) {
            const top = source.filter(p => p[key]).sort((a,b) => b[key] - a[key]).slice(0, 8);
            document.getElementById(elId).innerHTML = top.map(p => `
                <div class="p-3 flex items-center justify-between">
                    <div class="flex items-center gap-2">
                        <img src="https://api.dicebear.com/7.x/initials/svg?seed=${p['Player Name']}" class="avatar">
                        <div><div class="text-[10px] font-bold">${p['Player Name']}</div><div class="text-[8px] text-zinc-600 uppercase font-black">${p.Team}</div></div>
                    </div>
                    <span class="text-[#00ff85] font-black text-xs">${p[key]}</span>
                </div>`).join('');
        }

        function openTeam(teamName) {
            const roster = data.goals.filter(p => p.Team.includes(teamName));
            document.getElementById('teamModal').style.display = 'block';
            document.getElementById('teamContent').innerHTML = `
                <h1 class="text-4xl font-black italic text-[#00ff85] mb-4">${teamName}</h1>
                <h3 class="text-[10px] font-black text-zinc-500 mb-4 uppercase tracking-[0.2em]">Full Team Roster</h3>
                <div class="card divide-y divide-zinc-800">
                    ${roster.map(p => `
                        <div class="p-4 flex items-center justify-between">
                            <span class="text-xs font-bold">${p['Player Name']}</span>
                            <span class="badge">G: ${p.Goals}</span>
                        </div>`).join('')}
                </div>`;
        }

        function handleSearch() {
            const q = document.getElementById('mainSearch').value.toLowerCase();
            const found = data.standings.find(s => s.Team && s.Team.toLowerCase().includes(q));
            if (found && q.length > 3) openTeam(found.Team);
        }

        function showTab(t) {
            document.getElementById('section-standings').classList.toggle('hidden', t !== 'standings');
            document.getElementById('section-leaders').classList.toggle('hidden', t !== 'leaders');
            document.getElementById('btn-standings').classList.toggle('active', t === 'standings');
            document.getElementById('btn-leaders').classList.toggle('active', t === 'leaders');
        }

        function closeModal() { document.getElementById('teamModal').style.display = 'none'; }
        init();
    </script>
</body>
</html>
